function e(e,t,n,a){return new(n||(n=Promise))((function(r,i){function s(e){try{u(a.next(e))}catch(e){i(e)}}function o(e){try{u(a.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}u((a=a.apply(e,t||[])).next())}))}function t(e,t){var n,a,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,a=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}var n=Object.defineProperty,a=(e,t)=>{for(var a in t)n(e,a,{get:t[a],enumerable:!0})};function r(e,t=!1){let n=window.crypto.getRandomValues(new Uint32Array(1))[0],a=`_${n}`;return Object.defineProperty(window,a,{value:n=>(t&&Reflect.deleteProperty(window,a),null==e?void 0:e(n)),writable:!1,configurable:!0}),n}async function i(e,t={}){return new Promise(((n,a)=>{let i=r((e=>{n(e),Reflect.deleteProperty(window,`_${s}`)}),!0),s=r((e=>{a(e),Reflect.deleteProperty(window,`_${i}`)}),!0);window.__TAURI_IPC__({cmd:e,callback:i,error:s,...t})}))}function s(e,t="asset"){let n=encodeURIComponent(e);return navigator.userAgent.includes("Windows")?`https://${t}.localhost/${n}`:`${t}://localhost/${n}`}async function o(e){return i("tauri",e)}a({},{convertFileSrc:()=>s,invoke:()=>i,transformCallback:()=>r});async function u(e,t){return o({__tauriModule:"Event",message:{cmd:"unlisten",event:e,eventId:t}})}async function c(e,t,n){await o({__tauriModule:"Event",message:{cmd:"emit",event:e,windowLabel:t,payload:n}})}async function l(e,t,n){return o({__tauriModule:"Event",message:{cmd:"listen",event:e,windowLabel:t,handler:r(n)}}).then((t=>async()=>u(e,t)))}async function d(e,t,n){return l(e,t,(t=>{n(t),u(e,t.id).catch((()=>{}))}))}a({},{TauriEvent:()=>h,emit:()=>y,listen:()=>p,once:()=>m});var h=(e=>(e.WINDOW_RESIZED="tauri://resize",e.WINDOW_MOVED="tauri://move",e.WINDOW_CLOSE_REQUESTED="tauri://close-requested",e.WINDOW_CREATED="tauri://window-created",e.WINDOW_DESTROYED="tauri://destroyed",e.WINDOW_FOCUS="tauri://focus",e.WINDOW_BLUR="tauri://blur",e.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",e.WINDOW_THEME_CHANGED="tauri://theme-changed",e.WINDOW_FILE_DROP="tauri://file-drop",e.WINDOW_FILE_DROP_HOVER="tauri://file-drop-hover",e.WINDOW_FILE_DROP_CANCELLED="tauri://file-drop-cancelled",e.MENU="tauri://menu",e.CHECK_UPDATE="tauri://update",e.UPDATE_AVAILABLE="tauri://update-available",e.INSTALL_UPDATE="tauri://update-install",e.STATUS_UPDATE="tauri://update-status",e.DOWNLOAD_PROGRESS="tauri://update-download-progress",e))(h||{});async function p(e,t){return l(e,null,t)}async function m(e,t){return d(e,null,t)}async function y(e,t){return c(e,void 0,t)}async function g(e){return p("tauri://update-status",(t=>{e(null==t?void 0:t.payload)}))}async function f(){let e;function t(){e&&e(),e=void 0}return new Promise(((n,a)=>{g((function(e){return e.error?(t(),a(e.error)):"DONE"===e.status?(t(),n()):void 0})).then((t=>{e=t})).catch((e=>{throw t(),e})),y("tauri://update-install").catch((e=>{throw t(),e}))}))}async function _(){let e;function t(){e&&e(),e=void 0}return new Promise(((n,a)=>{m("tauri://update-available",(e=>{!function(e){t(),n({manifest:e,shouldUpdate:!0})}(null==e?void 0:e.payload)})).catch((e=>{throw t(),e})),g((function(e){return e.error?(t(),a(e.error)):"UPTODATE"===e.status?(t(),n({shouldUpdate:!1})):void 0})).then((t=>{e=t})).catch((e=>{throw t(),e})),y("tauri://update").catch((e=>{throw t(),e}))}))}a({},{checkUpdate:()=>_,installUpdate:()=>f,onUpdaterEvent:()=>g});a({},{CloseRequestedEvent:()=>O,LogicalPosition:()=>v,LogicalSize:()=>w,PhysicalPosition:()=>M,PhysicalSize:()=>b,UserAttentionType:()=>P,WebviewWindow:()=>S,WebviewWindowHandle:()=>E,WindowManager:()=>L,appWindow:()=>W,availableMonitors:()=>F,currentMonitor:()=>x,getAll:()=>A,getCurrent:()=>D,primaryMonitor:()=>z});var w=class{constructor(e,t){this.type="Logical",this.width=e,this.height=t}},b=class{constructor(e,t){this.type="Physical",this.width=e,this.height=t}toLogical(e){return new w(this.width/e,this.height/e)}},v=class{constructor(e,t){this.type="Logical",this.x=e,this.y=t}},M=class{constructor(e,t){this.type="Physical",this.x=e,this.y=t}toLogical(e){return new v(this.x/e,this.y/e)}},P=(e=>(e[e.Critical=1]="Critical",e[e.Informational=2]="Informational",e))(P||{});function D(){return new S(window.__TAURI_METADATA__.__currentWindow.label,{skip:!0})}function A(){return window.__TAURI_METADATA__.__windows.map((e=>new S(e.label,{skip:!0})))}var W,T=["tauri://created","tauri://error"],E=class{constructor(e){this.label=e,this.listeners=Object.create(null)}async listen(e,t){return this._handleTauriEvent(e,t)?Promise.resolve((()=>{let n=this.listeners[e];n.splice(n.indexOf(t),1)})):l(e,this.label,t)}async once(e,t){return this._handleTauriEvent(e,t)?Promise.resolve((()=>{let n=this.listeners[e];n.splice(n.indexOf(t),1)})):d(e,this.label,t)}async emit(e,t){if(T.includes(e)){for(let n of this.listeners[e]||[])n({event:e,id:-1,windowLabel:this.label,payload:t});return Promise.resolve()}return c(e,this.label,t)}_handleTauriEvent(e,t){return!!T.includes(e)&&(e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t],!0)}},L=class extends E{async scaleFactor(){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"scaleFactor"}}}})}async innerPosition(){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"innerPosition"}}}}).then((({x:e,y:t})=>new M(e,t)))}async outerPosition(){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"outerPosition"}}}}).then((({x:e,y:t})=>new M(e,t)))}async innerSize(){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"innerSize"}}}}).then((({width:e,height:t})=>new b(e,t)))}async outerSize(){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"outerSize"}}}}).then((({width:e,height:t})=>new b(e,t)))}async isFullscreen(){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isFullscreen"}}}})}async isMaximized(){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isMaximized"}}}})}async isDecorated(){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isDecorated"}}}})}async isResizable(){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isResizable"}}}})}async isVisible(){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isVisible"}}}})}async theme(){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"theme"}}}})}async center(){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"center"}}}})}async requestUserAttention(e){let t=null;return e&&(t=1===e?{type:"Critical"}:{type:"Informational"}),o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"requestUserAttention",payload:t}}}})}async setResizable(e){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setResizable",payload:e}}}})}async setTitle(e){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setTitle",payload:e}}}})}async maximize(){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"maximize"}}}})}async unmaximize(){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"unmaximize"}}}})}async toggleMaximize(){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"toggleMaximize"}}}})}async minimize(){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"minimize"}}}})}async unminimize(){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"unminimize"}}}})}async show(){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"show"}}}})}async hide(){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"hide"}}}})}async close(){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"close"}}}})}async setDecorations(e){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setDecorations",payload:e}}}})}async setAlwaysOnTop(e){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setAlwaysOnTop",payload:e}}}})}async setSize(e){if(!e||"Logical"!==e.type&&"Physical"!==e.type)throw new Error("the `size` argument must be either a LogicalSize or a PhysicalSize instance");return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setSize",payload:{type:e.type,data:{width:e.width,height:e.height}}}}}})}async setMinSize(e){if(e&&"Logical"!==e.type&&"Physical"!==e.type)throw new Error("the `size` argument must be either a LogicalSize or a PhysicalSize instance");return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setMinSize",payload:e?{type:e.type,data:{width:e.width,height:e.height}}:null}}}})}async setMaxSize(e){if(e&&"Logical"!==e.type&&"Physical"!==e.type)throw new Error("the `size` argument must be either a LogicalSize or a PhysicalSize instance");return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setMaxSize",payload:e?{type:e.type,data:{width:e.width,height:e.height}}:null}}}})}async setPosition(e){if(!e||"Logical"!==e.type&&"Physical"!==e.type)throw new Error("the `position` argument must be either a LogicalPosition or a PhysicalPosition instance");return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setPosition",payload:{type:e.type,data:{x:e.x,y:e.y}}}}}})}async setFullscreen(e){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setFullscreen",payload:e}}}})}async setFocus(){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setFocus"}}}})}async setIcon(e){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setIcon",payload:{icon:"string"==typeof e?e:Array.from(e)}}}}})}async setSkipTaskbar(e){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setSkipTaskbar",payload:e}}}})}async setCursorGrab(e){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setCursorGrab",payload:e}}}})}async setCursorVisible(e){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setCursorVisible",payload:e}}}})}async setCursorIcon(e){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setCursorIcon",payload:e}}}})}async setCursorPosition(e){if(!e||"Logical"!==e.type&&"Physical"!==e.type)throw new Error("the `position` argument must be either a LogicalPosition or a PhysicalPosition instance");return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setCursorPosition",payload:{type:e.type,data:{x:e.x,y:e.y}}}}}})}async setIgnoreCursorEvents(e){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setIgnoreCursorEvents",payload:e}}}})}async startDragging(){return o({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"startDragging"}}}})}async onResized(e){return this.listen("tauri://resize",e)}async onMoved(e){return this.listen("tauri://move",e)}async onCloseRequested(e){return this.listen("tauri://close-requested",(t=>{let n=new O(t);Promise.resolve(e(n)).then((()=>{if(!n.isPreventDefault())return this.close()}))}))}async onFocusChanged(e){let t=await this.listen("tauri://focus",(t=>{e({...t,payload:!0})})),n=await this.listen("tauri://blur",(t=>{e({...t,payload:!1})}));return()=>{t(),n()}}async onScaleChanged(e){return this.listen("tauri://scale-change",e)}async onMenuClicked(e){return this.listen("tauri://menu",e)}async onFileDropEvent(e){let t=await this.listen("tauri://file-drop",(t=>{e({...t,payload:{type:"drop",paths:t.payload}})})),n=await this.listen("tauri://file-drop-hover",(t=>{e({...t,payload:{type:"hover",paths:t.payload}})})),a=await this.listen("tauri://file-drop-cancelled",(t=>{e({...t,payload:{type:"cancel"}})}));return()=>{t(),n(),a()}}async onThemeChanged(e){return this.listen("tauri://theme-changed",e)}},O=class{constructor(e){this._preventDefault=!1,this.event=e.event,this.windowLabel=e.windowLabel,this.id=e.id}preventDefault(){this._preventDefault=!0}isPreventDefault(){return this._preventDefault}},S=class extends L{constructor(e,t={}){super(e),null!=t&&t.skip||o({__tauriModule:"Window",message:{cmd:"createWebview",data:{options:{label:e,...t}}}}).then((async()=>this.emit("tauri://created"))).catch((async e=>this.emit("tauri://error",e)))}static getByLabel(e){return A().some((t=>t.label===e))?new S(e,{skip:!0}):null}};function C(e){return null===e?null:{name:e.name,scaleFactor:e.scaleFactor,position:new M(e.position.x,e.position.y),size:new b(e.size.width,e.size.height)}}async function x(){return o({__tauriModule:"Window",message:{cmd:"manage",data:{cmd:{type:"currentMonitor"}}}}).then(C)}async function z(){return o({__tauriModule:"Window",message:{cmd:"manage",data:{cmd:{type:"primaryMonitor"}}}}).then(C)}async function F(){return o({__tauriModule:"Window",message:{cmd:"manage",data:{cmd:{type:"availableMonitors"}}}}).then((e=>e.map(C)))}"__TAURI_METADATA__"in window?W=new S(window.__TAURI_METADATA__.__currentWindow.label,{skip:!0}):(console.warn('Could not find "window.__TAURI_METADATA__". The "appWindow" value will reference the "main" window label.\nNote that this is not an issue if running this frontend on a browser instead of a Tauri window.'),W=new S("main",{skip:!0}));async function N(){return"default"!==window.Notification.permission?Promise.resolve("granted"===window.Notification.permission):o({__tauriModule:"Notification",message:{cmd:"isNotificationPermissionGranted"}})}async function k(){return window.Notification.requestPermission()}function R(e){"string"==typeof e?new window.Notification(e):new window.Notification(e.title,e)}function I(){return navigator.appVersion.includes("Win")}a({},{isPermissionGranted:()=>N,requestPermission:()=>k,sendNotification:()=>R});a({},{EOL:()=>j,arch:()=>G,platform:()=>q,tempdir:()=>V,type:()=>U,version:()=>H});var j=I()?"\r\n":"\n";async function q(){return o({__tauriModule:"Os",message:{cmd:"platform"}})}async function H(){return o({__tauriModule:"Os",message:{cmd:"version"}})}async function U(){return o({__tauriModule:"Os",message:{cmd:"osType"}})}async function G(){return o({__tauriModule:"Os",message:{cmd:"arch"}})}async function V(){return o({__tauriModule:"Os",message:{cmd:"tempdir"}})}a({},{BaseDirectory:()=>B,Dir:()=>B,copyFile:()=>ee,createDir:()=>Z,exists:()=>ae,readBinaryFile:()=>$,readDir:()=>Y,readTextFile:()=>J,removeDir:()=>X,removeFile:()=>te,renameFile:()=>ne,writeBinaryFile:()=>Q,writeFile:()=>K,writeTextFile:()=>K});var B=(e=>(e[e.Audio=1]="Audio",e[e.Cache=2]="Cache",e[e.Config=3]="Config",e[e.Data=4]="Data",e[e.LocalData=5]="LocalData",e[e.Desktop=6]="Desktop",e[e.Document=7]="Document",e[e.Download=8]="Download",e[e.Executable=9]="Executable",e[e.Font=10]="Font",e[e.Home=11]="Home",e[e.Picture=12]="Picture",e[e.Public=13]="Public",e[e.Runtime=14]="Runtime",e[e.Template=15]="Template",e[e.Video=16]="Video",e[e.Resource=17]="Resource",e[e.App=18]="App",e[e.Log=19]="Log",e[e.Temp=20]="Temp",e[e.AppConfig=21]="AppConfig",e[e.AppData=22]="AppData",e[e.AppLocalData=23]="AppLocalData",e[e.AppCache=24]="AppCache",e[e.AppLog=25]="AppLog",e))(B||{});async function J(e,t={}){return o({__tauriModule:"Fs",message:{cmd:"readTextFile",path:e,options:t}})}async function $(e,t={}){let n=await o({__tauriModule:"Fs",message:{cmd:"readFile",path:e,options:t}});return Uint8Array.from(n)}async function K(e,t,n){"object"==typeof n&&Object.freeze(n),"object"==typeof e&&Object.freeze(e);let a={path:"",contents:""},r=n;return"string"==typeof e?a.path=e:(a.path=e.path,a.contents=e.contents),"string"==typeof t?a.contents=t??"":r=t,o({__tauriModule:"Fs",message:{cmd:"writeFile",path:a.path,contents:Array.from((new TextEncoder).encode(a.contents)),options:r}})}async function Q(e,t,n){"object"==typeof n&&Object.freeze(n),"object"==typeof e&&Object.freeze(e);let a={path:"",contents:[]},r=n;return"string"==typeof e?a.path=e:(a.path=e.path,a.contents=e.contents),t&&"dir"in t?r=t:"string"==typeof e&&(a.contents=t??[]),o({__tauriModule:"Fs",message:{cmd:"writeFile",path:a.path,contents:Array.from(a.contents instanceof ArrayBuffer?new Uint8Array(a.contents):a.contents),options:r}})}async function Y(e,t={}){return o({__tauriModule:"Fs",message:{cmd:"readDir",path:e,options:t}})}async function Z(e,t={}){return o({__tauriModule:"Fs",message:{cmd:"createDir",path:e,options:t}})}async function X(e,t={}){return o({__tauriModule:"Fs",message:{cmd:"removeDir",path:e,options:t}})}async function ee(e,t,n={}){return o({__tauriModule:"Fs",message:{cmd:"copyFile",source:e,destination:t,options:n}})}async function te(e,t={}){return o({__tauriModule:"Fs",message:{cmd:"removeFile",path:e,options:t}})}async function ne(e,t,n={}){return o({__tauriModule:"Fs",message:{cmd:"renameFile",oldPath:e,newPath:t,options:n}})}async function ae(e,t={}){return o({__tauriModule:"Fs",message:{cmd:"exists",path:e,options:t}})}async function re(){return ie()}async function ie(){return o({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:21}})}async function se(){return o({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:22}})}async function oe(){return o({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:23}})}async function ue(){return o({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:24}})}async function ce(){return o({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:1}})}async function le(){return o({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:2}})}async function de(){return o({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:3}})}async function he(){return o({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:4}})}async function pe(){return o({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:6}})}async function me(){return o({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:7}})}async function ye(){return o({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:8}})}async function ge(){return o({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:9}})}async function fe(){return o({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:10}})}async function _e(){return o({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:11}})}async function we(){return o({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:5}})}async function be(){return o({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:12}})}async function ve(){return o({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:13}})}async function Me(){return o({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:17}})}async function Pe(e){return o({__tauriModule:"Path",message:{cmd:"resolvePath",path:e,directory:17}})}async function De(){return o({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:14}})}async function Ae(){return o({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:15}})}async function We(){return o({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:16}})}async function Te(){return Ee()}async function Ee(){return o({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:25}})}a({},{BaseDirectory:()=>B,appCacheDir:()=>ue,appConfigDir:()=>ie,appDataDir:()=>se,appDir:()=>re,appLocalDataDir:()=>oe,appLogDir:()=>Ee,audioDir:()=>ce,basename:()=>Ne,cacheDir:()=>le,configDir:()=>de,dataDir:()=>he,delimiter:()=>Oe,desktopDir:()=>pe,dirname:()=>ze,documentDir:()=>me,downloadDir:()=>ye,executableDir:()=>ge,extname:()=>Fe,fontDir:()=>fe,homeDir:()=>_e,isAbsolute:()=>ke,join:()=>xe,localDataDir:()=>we,logDir:()=>Te,normalize:()=>Ce,pictureDir:()=>be,publicDir:()=>ve,resolve:()=>Se,resolveResource:()=>Pe,resourceDir:()=>Me,runtimeDir:()=>De,sep:()=>Le,templateDir:()=>Ae,videoDir:()=>We});var Le=I()?"\\":"/",Oe=I()?";":":";async function Se(...e){return o({__tauriModule:"Path",message:{cmd:"resolve",paths:e}})}async function Ce(e){return o({__tauriModule:"Path",message:{cmd:"normalize",path:e}})}async function xe(...e){return o({__tauriModule:"Path",message:{cmd:"join",paths:e}})}async function ze(e){return o({__tauriModule:"Path",message:{cmd:"dirname",path:e}})}async function Fe(e){return o({__tauriModule:"Path",message:{cmd:"extname",path:e}})}async function Ne(e,t){return o({__tauriModule:"Path",message:{cmd:"basename",path:e,ext:t}})}async function ke(e){return o({__tauriModule:"Path",message:{cmd:"isAbsolute",path:e}})}async function Re(e=0){return o({__tauriModule:"Process",message:{cmd:"exit",exitCode:e}})}async function Ie(){return o({__tauriModule:"Process",message:{cmd:"relaunch"}})}a({},{exit:()=>Re,relaunch:()=>Ie});a({},{Child:()=>qe,Command:()=>He,EventEmitter:()=>je,open:()=>Ue});var je=class{constructor(){this.eventListeners=Object.create(null)}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}on(e,t){return e in this.eventListeners?this.eventListeners[e].push(t):this.eventListeners[e]=[t],this}once(e,t){let n=(...a)=>{this.removeListener(e,n),t(...a)};return this.addListener(e,n)}off(e,t){return e in this.eventListeners&&(this.eventListeners[e]=this.eventListeners[e].filter((e=>e!==t))),this}removeAllListeners(e){return e?delete this.eventListeners[e]:this.eventListeners=Object.create(null),this}emit(e,...t){if(e in this.eventListeners){let n=this.eventListeners[e];for(let e of n)e(...t);return!0}return!1}listenerCount(e){return e in this.eventListeners?this.eventListeners[e].length:0}prependListener(e,t){return e in this.eventListeners?this.eventListeners[e].unshift(t):this.eventListeners[e]=[t],this}prependOnceListener(e,t){let n=(...a)=>{this.removeListener(e,n),t(...a)};return this.prependListener(e,n)}},qe=class{constructor(e){this.pid=e}async write(e){return o({__tauriModule:"Shell",message:{cmd:"stdinWrite",pid:this.pid,buffer:"string"==typeof e?e:Array.from(e)}})}async kill(){return o({__tauriModule:"Shell",message:{cmd:"killChild",pid:this.pid}})}},He=class extends je{constructor(e,t=[],n){super(),this.stdout=new je,this.stderr=new je,this.program=e,this.args="string"==typeof t?[t]:t,this.options=n??{}}static sidecar(e,t=[],n){let a=new He(e,t,n);return a.options.sidecar=!0,a}async spawn(){return async function(e,t,n=[],a){return"object"==typeof n&&Object.freeze(n),o({__tauriModule:"Shell",message:{cmd:"execute",program:t,args:n,options:a,onEventFn:r(e)}})}((e=>{switch(e.event){case"Error":this.emit("error",e.payload);break;case"Terminated":this.emit("close",e.payload);break;case"Stdout":this.stdout.emit("data",e.payload);break;case"Stderr":this.stderr.emit("data",e.payload)}}),this.program,this.args,this.options).then((e=>new qe(e)))}async execute(){return new Promise(((e,t)=>{this.on("error",t);let n=[],a=[];this.stdout.on("data",(e=>{n.push(e)})),this.stderr.on("data",(e=>{a.push(e)})),this.on("close",(t=>{e({code:t.code,signal:t.signal,stdout:n.join("\n"),stderr:a.join("\n")})})),this.spawn().catch(t)}))}};async function Ue(e,t){return o({__tauriModule:"Shell",message:{cmd:"open",path:e,with:t}})}async function Ge(){return o({__tauriModule:"App",message:{cmd:"getAppVersion"}})}async function Ve(){return o({__tauriModule:"App",message:{cmd:"getAppName"}})}async function Be(){return o({__tauriModule:"App",message:{cmd:"getTauriVersion"}})}async function Je(){return o({__tauriModule:"App",message:{cmd:"show"}})}async function $e(){return o({__tauriModule:"App",message:{cmd:"hide"}})}a({},{getName:()=>Ve,getTauriVersion:()=>Be,getVersion:()=>Ge,hide:()=>$e,show:()=>Je});async function Ke(){return o({__tauriModule:"Cli",message:{cmd:"cliMatches"}})}a({},{getMatches:()=>Ke});async function Qe(e){return o({__tauriModule:"Clipboard",message:{cmd:"writeText",data:e}})}async function Ye(){return o({__tauriModule:"Clipboard",message:{cmd:"readText",data:null}})}a({},{readText:()=>Ye,writeText:()=>Qe});async function Ze(e={}){return"object"==typeof e&&Object.freeze(e),o({__tauriModule:"Dialog",message:{cmd:"openDialog",options:e}})}async function Xe(e={}){return"object"==typeof e&&Object.freeze(e),o({__tauriModule:"Dialog",message:{cmd:"saveDialog",options:e}})}async function et(e,t){var n;let a="string"==typeof t?{title:t}:t;return o({__tauriModule:"Dialog",message:{cmd:"messageDialog",message:e.toString(),title:null==(n=null==a?void 0:a.title)?void 0:n.toString(),type:null==a?void 0:a.type}})}async function tt(e,t){var n;let a="string"==typeof t?{title:t}:t;return o({__tauriModule:"Dialog",message:{cmd:"askDialog",message:e.toString(),title:null==(n=null==a?void 0:a.title)?void 0:n.toString(),type:null==a?void 0:a.type}})}async function nt(e,t){var n;let a="string"==typeof t?{title:t}:t;return o({__tauriModule:"Dialog",message:{cmd:"confirmDialog",message:e.toString(),title:null==(n=null==a?void 0:a.title)?void 0:n.toString(),type:null==a?void 0:a.type}})}a({},{ask:()=>tt,confirm:()=>nt,message:()=>et,open:()=>Ze,save:()=>Xe});async function at(e,t){return o({__tauriModule:"GlobalShortcut",message:{cmd:"register",shortcut:e,handler:r(t)}})}async function rt(e,t){return o({__tauriModule:"GlobalShortcut",message:{cmd:"registerAll",shortcuts:e,handler:r(t)}})}async function it(e){return o({__tauriModule:"GlobalShortcut",message:{cmd:"isRegistered",shortcut:e}})}async function st(e){return o({__tauriModule:"GlobalShortcut",message:{cmd:"unregister",shortcut:e}})}async function ot(){return o({__tauriModule:"GlobalShortcut",message:{cmd:"unregisterAll"}})}a({},{isRegistered:()=>it,register:()=>at,registerAll:()=>rt,unregister:()=>st,unregisterAll:()=>ot});a({},{Body:()=>ct,Client:()=>dt,Response:()=>lt,ResponseType:()=>ut,fetch:()=>mt,getClient:()=>ht});var ut=(e=>(e[e.JSON=1]="JSON",e[e.Text=2]="Text",e[e.Binary=3]="Binary",e))(ut||{}),ct=class{constructor(e,t){this.type=e,this.payload=t}static form(e){let t={},n=(e,n)=>{if(null!==n){let a;a="string"==typeof n?n:n instanceof Uint8Array||Array.isArray(n)?Array.from(n):n instanceof File?{file:n.name,mime:n.type,fileName:n.name}:"string"==typeof n.file?{file:n.file,mime:n.mime,fileName:n.fileName}:{file:Array.from(n.file),mime:n.mime,fileName:n.fileName},t[String(e)]=a}};if(e instanceof FormData)for(let[t,a]of e)n(t,a);else for(let[t,a]of Object.entries(e))n(t,a);return new ct("Form",t)}static json(e){return new ct("Json",e)}static text(e){return new ct("Text",e)}static bytes(e){return new ct("Bytes",Array.from(e instanceof ArrayBuffer?new Uint8Array(e):e))}},lt=class{constructor(e){this.url=e.url,this.status=e.status,this.ok=this.status>=200&&this.status<300,this.headers=e.headers,this.rawHeaders=e.rawHeaders,this.data=e.data}},dt=class{constructor(e){this.id=e}async drop(){return o({__tauriModule:"Http",message:{cmd:"dropClient",client:this.id}})}async request(e){let t=!e.responseType||1===e.responseType;return t&&(e.responseType=2),o({__tauriModule:"Http",message:{cmd:"httpRequest",client:this.id,options:e}}).then((e=>{let n=new lt(e);if(t){try{n.data=JSON.parse(n.data)}catch(e){if(n.ok&&""===n.data)n.data={};else if(n.ok)throw Error(`Failed to parse response \`${n.data}\` as JSON: ${e};\n              try setting the \`responseType\` option to \`ResponseType.Text\` or \`ResponseType.Binary\` if the API does not return a JSON response.`)}return n}return n}))}async get(e,t){return this.request({method:"GET",url:e,...t})}async post(e,t,n){return this.request({method:"POST",url:e,body:t,...n})}async put(e,t,n){return this.request({method:"PUT",url:e,body:t,...n})}async patch(e,t){return this.request({method:"PATCH",url:e,...t})}async delete(e,t){return this.request({method:"DELETE",url:e,...t})}};async function ht(e){return o({__tauriModule:"Http",message:{cmd:"createClient",options:e}}).then((e=>new dt(e)))}var pt=null;async function mt(e,t){return null===pt&&(pt=await ht()),pt.request({url:e,method:(null==t?void 0:t.method)??"GET",...t})}var yt,gt=i,ft=function(){function n(n){var a=this;this._pid=n.pid,this.reqHis=new Array,this.ackHis=new Array,this._unlistenFn=function(){return e(a,void 0,void 0,(function(){return t(this,(function(e){return[2]}))}))},this._wait_seq=0,this._ping={ping:0},this._start=0,this._timeout=0}return Object.defineProperty(n.prototype,"id",{get:function(){return"p-".concat(this._pid)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"pid",{get:function(){return this._pid},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"reqs",{get:function(){return this.reqHis},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"acks",{get:function(){return this.ackHis},enumerable:!1,configurable:!0}),n.prototype.refreshHistory=function(){return e(this,void 0,void 0,(function(){var e,n,a,r,i,s,o,u,c,l,d,h;return t(this,(function(t){switch(t.label){case 0:return this.reqHis.splice(0,this.reqHis.length),n=(e=(d=this.reqHis).push).apply,a=[d],i=(r=JSON).parse,[4,gt("plugin:agentmgr|history_send",{pid:this.pid,limit:64,reverse:!0})];case 1:return n.apply(e,a.concat([i.apply(r,[t.sent()])])),this.ackHis.splice(0,this.ackHis.length),o=(s=(h=this.ackHis).push).apply,u=[h],l=(c=JSON).parse,[4,gt("plugin:agentmgr|history_recv",{pid:this.pid,limit:64,reverse:!0})];case 2:return o.apply(s,u.concat([l.apply(c,[t.sent()])])),[2]}}))}))},n.prototype.useHistory=function(n,a){return e(this,void 0,void 0,(function(){return t(this,(function(e){switch(e.label){case 0:return this.reqHis=n,this.ackHis=a,[4,this.refreshHistory()];case 1:return e.sent(),[2]}}))}))},n.prototype.usePing=function(n){return e(this,void 0,void 0,(function(){var e;return t(this,(function(t){switch(t.label){case 0:return this._ping=n,this._wait_seq++,e='{"CsPing":{"seq": '.concat(this._wait_seq,"}}"),[4,gt("plugin:agentmgr|gate_send",{pid:this._pid,msg:e})];case 1:return t.sent(),this._start=Date.now(),[2]}}))}))},n.prototype.listen=function(){return e(this,void 0,void 0,(function(){var n,a=this;return t(this,(function(r){switch(r.label){case 0:return[4,gt("plugin:agentmgr|gate_listen_recv",{pid:this.pid})];case 1:return r.sent(),[4,p("psc-".concat(this.pid),(function(n){var r=JSON.parse(n.payload);if(0!==a._wait_seq&&2===r.msgid){var i=r.payload.ScPing.seq;if(a._wait_seq===i){var s=Date.now();a._ping.ping=s-a._start,a._timeout=window.setTimeout((function(){return e(a,void 0,void 0,(function(){var e;return t(this,(function(t){switch(t.label){case 0:return this._wait_seq++,e='{"CsPing":{"seq": '.concat(this._wait_seq,"}}"),[4,gt("plugin:agentmgr|gate_send",{pid:this._pid,msg:e})];case 1:return t.sent(),this._start=Date.now(),[2]}}))}))}),2500)}}else a.ackHis.push(r)}))];case 2:return n=r.sent(),this._unlistenFn=function(){return new Promise((function(e,t){gt("plugin:agentmgr|gate_unlisten_recv",{pid:a.pid}).then((function(t){console.log("unlisten psc.".concat(a.pid)),window.clearTimeout(a._timeout),n(),e()})).catch((function(e){t(e)}))}))},[2]}}))}))},Object.defineProperty(n.prototype,"unlisten",{get:function(){return this._unlistenFn},enumerable:!1,configurable:!0}),n.prototype.send=function(e){var t=this;return new Promise((function(n,a){gt("plugin:agentmgr|gate_send",{pid:t._pid,msg:e}).then((function(e){var a=JSON.parse(e);t.reqHis.push(a),n(a)})).catch((function(e){a(e)}))}))},n.prototype.recv=function(){var e=this;return new Promise((function(t,n){gt("plugin:agentmgr|gate_recv",{pid:e._pid}).then((function(n){var a=JSON.parse(n);e.ackHis.push(a),console.log(e.ackHis),t(a)})).catch((function(e){n(e)}))}))},n}(),_t=function(){function n(e,t){this._username=e,this._players=t}return Object.defineProperty(n.prototype,"id",{get:function(){return"pf-".concat(this.username)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"username",{get:function(){return this._username},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"players",{get:function(){return this._players},enumerable:!1,configurable:!0}),n.prototype.createPlayer=function(n){return e(this,void 0,void 0,(function(){var e;return t(this,(function(t){switch(t.label){case 0:return[4,gt("plugin:agentmgr|pf_create_player",{username:this._username,name:n})];case 1:return e=t.sent(),this._players.push(e),[2]}}))}))},n.prototype.refreshPlayers=function(){return e(this,void 0,void 0,(function(){var e,n,a,r;return t(this,(function(t){switch(t.label){case 0:return this._players.splice(0,this._players.length),n=(e=(r=this._players).push).apply,a=[r],[4,gt("plugin:agentmgr|pf_refresh_players",{username:this._username})];case 1:return n.apply(e,a.concat([t.sent()])),[2]}}))}))},n.prototype.usePlayers=function(n){return e(this,void 0,void 0,(function(){return t(this,(function(e){switch(e.label){case 0:return this._players=n,[4,this.refreshPlayers()];case 1:return e.sent(),[2]}}))}))},n.prototype.usePlayer=function(n){return e(this,void 0,void 0,(function(){return t(this,(function(e){switch(e.label){case 0:return[4,gt("plugin:agentmgr|pf_use_player",{username:this._username,pid:n})];case 1:return e.sent(),[2,new ft({pid:n})]}}))}))},n}(),wt=function(){function n(e){var t=this;this._pfs=new Map,this._gates=new Map,e.pfs.forEach((function(e){t._pfs.set(e.username,new _t(e.username,e.players))})),e.gates.forEach((function(e){t._gates.set(e.pid,new ft(e))})),this._info=new Array(this._pfs.size+this._gates.size),this._pfs.forEach((function(e){t._info.push({name:e.id,typ:"normal",key:"norm-".concat(e.id)})})),this._gates.forEach((function(e){t._info.push({name:e.id,typ:"fast",key:"fast-".concat(e.id)})}))}return Object.defineProperty(n.prototype,"info",{get:function(){return this._info},enumerable:!1,configurable:!0}),n.prototype.addPfAgent=function(n,a){return e(this,void 0,void 0,(function(){var e,r;return t(this,(function(t){switch(t.label){case 0:return this._pfs.has(n)?(console.log("".concat(n," found in local AgentMgr")),[2,this._pfs.get(n)]):(console.log("".concat(n," not found in local AgentMgr")),[4,i("plugin:agentmgr|add_pf_agent",{username:n,password:a})]);case 1:return e=t.sent(),r=new _t(e.username,e.players),this._pfs.set(e.username,r),[2,r]}}))}))},n.prototype.addGateAgent=function(e){var t=this;return new Promise((function(n,a){t._gates.has(e)?n(t._gates.get(e)):i("plugin:agentmgr|add_gate_agent",{pid:e}).then((function(a){var r=new ft({pid:e});t._gates.set(e,r),n(r)})).catch((function(e){a(e)}))}))},n.prototype.removeGateAgent=function(n){return e(this,void 0,void 0,(function(){return t(this,(function(e){return[2]}))}))},n.prototype.removePfAgent=function(n){return e(this,void 0,void 0,(function(){return t(this,(function(e){return[2]}))}))},n.prototype.gateAgent=function(e){return this._gates.get(e)},n.prototype.pfAgent=function(e){return this._pfs.get(e)},n}();function bt(){return new Promise((function(e,t){void 0===yt?gt("plugin:agentmgr|agent_mgr_cache").then((function(t){yt=new wt(t),e(yt)})).catch((function(e){console.error(e),t(e)})):e(yt)}))}export{bt as useAgentMgr};
